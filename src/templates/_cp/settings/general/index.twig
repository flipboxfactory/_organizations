{% extends "organizations/_cp/settings/_layout" %}
{% import "_includes/forms" as forms %}
{% from "organizations/_cp/_components/sites" import uriSettings %}

{% block actionButton %}
    <div class="btngroup submit right">
        <input type="submit" class="btn submit" value="{{ 'Save'|t('app') }}">

        <div class="btn submit menubtn"></div>
        <div class="menu">
            <ul>
                <li><a class="formsubmit" data-redirect="{{ continueEditingUrl|hash }}">
                        {{ "Save and continue editing"|t('app') }}
                        {{ forms.optionShortcutLabel('S') }}
                    </a></li>
            </ul>
        </div>
    </div>
{% endblock %}

{% block content %}
    <input type="hidden" name="action" value="{{ baseActionPath }}/save"/>
    {{ redirectInput(baseCpPath) }}

    <div id="general">
        {{ uriSettings(settings, true) }}

        <hr/>

        {% set cols = {
            'label' : {
                type: 'singleline',
                heading: 'Label',
                width: '50'
            },
            'value' : {
                type: 'singleline',
                heading: 'Value',
                width: '50'
            }} %}

        {% set rows = [] %}
        {% for stateValue, stateLabel in settings.states %}
            {% set rows = rows|merge([{label: stateLabel, value: stateValue}]) %}
        {% endfor %}
        {{ forms.editableTableField({
            label: "States"|t('organizations'),
            instructions: "Enter each state on a new row."|t('organizations'),
            id: 'states',
            name: 'states',
            addRowLabel: "Add a state"|t('organizations'),
            cols: cols,
            rows: rows,
            errors: settings.getErrors('states')
        }) }}
    </div>
    <div id="layout" class="hidden">
        {% include "_includes/fieldlayoutdesigner" with {
            fieldLayout: settings.getFieldLayout()
        } only %}
    </div>
{% endblock %}